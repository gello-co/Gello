# Gello Architecture Documentation

This directory contains C4 architecture diagrams defined using Structurizr DSL.

## Directory Structure

```
docs/architecture/
├── workspace.dsl      # C4 model definitions (source of truth)
├── diagrams/          # Auto-generated PNG/SVG diagrams
│   ├── structurizr-SystemContext.png
│   ├── structurizr-Containers.png
│   ├── structurizr-Components.png
│   ├── structurizr-DevelopmentDeployment.png
│   └── structurizr-ProductionDeployment.png
└── README.md          # This file
```

## Diagram Types

| Diagram | Description |
|---------|-------------|
| System Context | Shows Gello in relation to users and external systems |
| Containers | High-level technical components (Web App, Database) |
| Components | Internal structure of the web application (routes, services, database layer) |
| Development Deployment | Local development environment setup |
| Production Deployment | Render + Supabase Cloud deployment |

## Editing the Architecture

1. **Edit the DSL file**: Modify `workspace.dsl` using any text editor
2. **Commit and push**: Push changes to `main` or `dev` branch
3. **Auto-generation**: GitHub Actions automatically generates updated diagrams
4. **Review**: Check the `diagrams/` folder for updated PNG/SVG files

## Local Preview

To preview diagrams locally before pushing:

```bash
# Using Docker
docker run -it --rm -v $(pwd)/docs/architecture:/usr/local/structurizr \
  structurizr/cli export -workspace /usr/local/structurizr/workspace.dsl \
  -format png -output /usr/local/structurizr/diagrams

# Or use Structurizr Lite for interactive editing
docker run -it --rm -p 8080:8080 \
  -v $(pwd)/docs/architecture:/usr/local/structurizr \
  structurizr/lite
```

## DSL Reference

- [Structurizr DSL Language Reference](https://docs.structurizr.com/dsl/language)
- [C4 Model](https://c4model.com/)

## CI/CD Integration

Diagrams are auto-generated by `.github/workflows/architecture-diagrams.yml` when:
- `workspace.dsl` is modified on `main` or `dev` branches
- A PR modifies `workspace.dsl`
- Workflow is manually triggered
